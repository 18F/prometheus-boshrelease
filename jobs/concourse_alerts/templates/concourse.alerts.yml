groups:
- name: concourse
  rules:
  - alert: ConcourseHighWorkerContainers
    expr: avg(worker_containers) by(bosh_deployment, worker) > <%= p('concourse_alerts.worker_containers.threshold') %>
    for: <%= p('concourse_alerts.worker_containers.evaluation_time') %>
    labels:
      service: concourse
      severity: warning
    annotations:
      description: 'Concourse worker `{{$bosh_deployment}}/{{$worker}}` is reporting too many containers: {{$value}}'
      summary: Concourse worker `{{$bosh_deployment}}/{{$worker}}` is reporting too many containers
